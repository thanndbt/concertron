<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.css" rel="stylesheet" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
		<!--<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">-->
		<title>Concertron Database Viewer</title>
	</head>
	<body>
		<div class="container">
			<h1>Concertron Database Viewer</h1>
			<form action="/filter" method="post">
				<div class="mb-3">
					<label for="venue_id" class="form-label">Venue</label>
					<select name="venue_id" class="form-control">
						<option value="NO_FILTER">All</option>
						{% for venue in collection.distinct('venue_id') %}
						<option value={{ venue }}>{{ venue.split('_')[1].capitalize() }}</option>
						{% endfor %}
					</select>
				</div>
				<div class="mb-3">
					<label for="date" class="form-label">Date</label>
					<input type="date" id="date" name="date" class="form-control">
				</div>
				<div class="mb-3 ">
					{% for status in collection.distinct('status') %}
					<div class="form-check form-check-inline">
						<input type="checkbox" class="form-check-input" name="status" id="{{ status }}" value="{{ status }}">
						<label class="form-check-label" for="{{ status }}">{{ status.replace('_', ' ').capitalize() }}</label>
					</div>
					{% endfor %}
				</div>

				<!--<label for="column">Filter by column:</label>-->
				<!--<input type="text" id="column" name="column">-->
				<!--<label for="value">Value:</label>-->
				<!--<input type="text" id="value" name="value">-->
				<button type="submit" class="btn btn-primary">Filter</button>
			</form>
			<div class="table-responsive">
				<table border="1" class="table">
					<tr>
						<th scope="col">Date</th>
						<th scope="col">Status</th>
						<th scope="col">Title</th>
						<th scope="col">Subtitle</th>
						<!--<th scope="col">Tags</th>-->
						<th scope="col">Location</th>
						<!-- Add more table headers if needed -->
					</tr>
					{% for entry in data %}
					<tr>
						<td scope="row">{{ entry.date }}</td>
						<td scope="row">{{ entry.status.replace('_', ' ').capitalize() }}</td>
						<td scope="row">
							<a href={{ entry.url }} target='__blank'>{{ entry.title }}</a><br>
							{% for act in entry.support %}
							{{ act }}<br>
							{% endfor %}

						</td>
						<td scope="row">{{ entry.subtitle }}</td>
						<!--<td scope="row">-->
						<!--{% for tag in entry.tags %}-->
						<!--{{ tag }} -->
						<!--{% endfor %}-->
						<!--</td>-->
						<td scope="row">{{ entry.location }}</td>
						<!-- Add more table cells if needed -->
					</tr>
					{% endfor %}
				</table>
			</div>
		</div>
	</body>
</html>
